# rule34-finder
О чём проект
------------

Это **CLI-генератор описаний персонажей** для Rule34: ты выбираешь теги (кто, прическа, настроение и т. д.), скрипт собирает строку тегов и отправляет запрос к Rule34 API, после чего открывает найденную картинку в браузере[1][2]. Польза — быстро подбирать набор тегов для картинок или вдохновения, не шарясь вручную по сайту.

Ключевые возможности
--------------------

* 14 групп тегов: «who», «body_type», «hair_style» и др. — всё хранится в `tags.json` и легко дополняется[3].  
* Удобный вывод тегов табличкой в терминал + выбор номера[4].  
* Автоматически фильтрует нежелательный контент через отрицательные теги `-furry -futanari -tentacles -guro -trap -scat -vore`[2].  
* После выбора всех атрибутов скрипт открывает превью в браузере (`open_in_browser=True` в `make_rule34_request`)[1].  
* Конфиг через `.env`: можешь поменять URL бэкенда, путь к `tags.json`, плейсхолдер картинки и т. д.[5].  
* Мини-обёртка над Rule34 API (`Rule34NewForAnimeGooners`) сортирует результаты по количеству комментариев, чтобы показывать более «живые» посты[2].

Структура репозитория
---------------------

| Файл/директория | Назначение |
|-----------------|-----------|
| `app.py` | Точка входа, CLI-логика выбора тегов и вызов API[1] |
| `charCreate.py` | Класс-конструктор персонажа: методы `choose_*`, вывод меню, сбор строки тегов[4] |
| `r34nfag.py` | Работа с Rule34 API: запросы, сортировка, открытие ссылки[2] |
| `config.py` | Глобальные настройки, чтение переменных окружения[5] |
| `tags.json` | Категории и списки тегов[3] |
| `requirements.txt` | Зависимости (requests, python-dotenv, aiogram)[6] |
| `test.py` | Пример простого запроса к API без генератора[7] |
| `sample.json` | Схема/пример ответа Rule34 (комментарии на русском)[8] |

Установка
---------

```bash
# 1. Клонируем репу
git clone https://github.com/you/your-rule34-cli.git
cd your-rule34-cli

# 2. Создаём виртуалку (рекомендуется)
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. Ставим зависимости
pip install -r requirements.txt

# 4. (Опционально) создаём .env
echo "TAGS_PATH=tags.json"          >> .env
echo "RULE_34_BACKEND_URL=https://api.rule34.xxx/index.php" >> .env
```

Запуск
------

```bash
python app.py
```

Дальше CLI предложит выбрать пункты. Пример диалога:

```
Choose hair_style:
--------------------------------------------------------
0: long_hair      1: very_long_hair  2: short_hair     3: bob_cut
...
--------------------------------------------------------
Enter number (0-14): 0
```

После того как пройдёшь все категории или скипнешь ненужные (введи пустую строку/невалидный номер), скрипт откроет найденную картинку в браузере. Если Rule34 ничего не вернул, покажется плейсхолдер[2].

Настройка и расширение
----------------------

* **Добавить теги** — просто правь `tags.json`, новые категории учитывай в `func_list` в `app.py`[1].  
* **Сменить API** (например, локальный прокси) — пропиши `RULE_34_BACKEND_URL` в `.env`[5].  
* **Вырубить авто-открытие** — в `app.py` поменяй `open_in_browser` на `False`[1].  
* **Telegram-бот** — в requirements уже лежит `aiogram`; можно прикрутить `Rule34NewForAnimeGooners` в бота, если хочется.

FAQ
---

**⚠ Контент 18+?**  
Да, Rule34 — NSFW. Используй только если тебе больше 18 лет и это легально в твоей стране.

**Что делать, если вылетает `Invalid request`?**  
Проверь VPN/доступ к `api.rule34.xxx` и лимит запросов.

**Можно ли получить не сампл, а оригинал?**  
`get_link_from_data` берёт `sample_url`, а если его нет — `file_url`[2]. Хочешь всегда оригинал — поправь метод.
